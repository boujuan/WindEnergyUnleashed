module WindEnergy
{
    /* Component Crafting Recipes */

    craftRecipe Recipe_Repurpose_Generator
    {
        // Requires one standard generator
        // Changed Need:Screwdriver to Require: as it's a tool
        // Or Electronics category
        timedAction = MakingElectrical,
        time = 120,
        category = Engineering,
        skillRequired = Electricity:3;Mechanics:3,
        inputs {
            item 1 tags[Screwdriver] mode:keep flags[Prop1;MayDegradeLight;NoBrokenItems],
            item 1 [Base.Generator] mode:destroy flags[NoBrokenItems],
        }
        outputs {
            item 1 WindEnergy.RepurposedGenerator,
        }
    }

    craftRecipe Recipe_Craft_Wooden_Turbine_Base
    {
        timedAction = MakingCarpentry,
        time = 50.0,
        category = Carpentry,
        skillRequired = Carpentry:1,
        inputs {
            item 4 [Base.Plank],
            item 8 [Base.Nails],
        }
        outputs {
            item 1 WindEnergy.WoodenTurbineBase,
        }
    }

    craftRecipe Recipe_Craft_Wooden_Turbine_Nacelle
    {
        // Increased time as it includes generator
        // Or Mechanics/Engineering category
        // Added Electricity for generator part
        timedAction = MakingCarpentry,
        time = 150.0,
        category = Carpentry,
        skillRequired = Carpentry:2;Mechanics:1;Electricity:1,
        inputs {
            item 3 [Base.Plank],
            item 6 [Base.Nails],
            item 4 [Base.Screws],
            item 1 [Base.MetalBar],
            item 1 [WindEnergy.RepurposedGenerator] mode:destroy,
        }
        outputs {
            item 1 WindEnergy.WoodenTurbineNacelle,
        }
    }

    craftRecipe Recipe_Craft_Wooden_Turbine_Blades
    {
        // Using Carpentry instead of Carving
        // Tool required
        timedAction = MakingCarpentry,
        time = 60.0,
        category = Carpentry,
        skillRequired = Carpentry:2,
        inputs {
            item 3 [Base.Plank],
            item 1 tags[Saw] mode:keep flags[Prop1;MayDegradeLight;NoBrokenItems],
        }
        outputs {
            item 1 WindEnergy.WoodenTurbineBlades,
        }
    }

     craftRecipe Recipe_Craft_Big_Wooden_Turbine_Blades
    {
        // Longer time
        // Higher skill
        // More planks
        // Tool required
        timedAction = MakingCarpentry,
        time = 90.0,
        category = Carpentry,
        skillRequired = Carpentry:4,
        inputs {
            item 5 [Base.Plank],
            item 1 tags[Saw] mode:keep flags[Prop1;MayDegradeLight;NoBrokenItems],
        }
        outputs {
            item 1 WindEnergy.BigWoodenTurbineBlades,
        }
    }

    craftRecipe Recipe_Craft_Metal_Turbine_Base
    {
        // Using screws as requested, but welding implies maybe bars/pipes? Sticking to request.
        // Propane Torch for soldering/welding
        timedAction = MakingMetalWelding,
        time = 120.0,
        category = Metalworking,
        skillRequired = MetalWelding:3,
        inputs {
            item 4 [Base.SheetMetal],
            item 10 [Base.Screws],
            item 1 tags[BlowTorch] mode:keep flags[Prop1;MayDegradeLight;NoBrokenItems],
            item 1 tags[WeldingMask] mode:keep flags[Prop2;NoBrokenItems],
        }
        outputs {
            item 1 WindEnergy.MetalTurbineBase,
        }
    }

    craftRecipe Recipe_Craft_Metal_Turbine_Nacelle
    {
        // Increased time
        // Or Engineering category
        // Using SheetMetal as requested
        // Propane Torch for soldering/welding
        timedAction = MakingMetalWelding,
        time = 250.0,
        category = Metalworking,
        skillRequired = MetalWelding:4;Mechanics:2;Electricity:2,
        inputs {
            item 3 [Base.SheetMetal],
            item 8 [Base.Screws],
            item 2 [Base.MetalBar],
            item 1 [WindEnergy.RepurposedGenerator] mode:destroy,
            item 1 tags[BlowTorch] mode:keep flags[Prop1;MayDegradeLight;NoBrokenItems],
            item 1 tags[WeldingMask] mode:keep flags[Prop2;NoBrokenItems],
        }
        outputs {
            item 1 WindEnergy.MetalTurbineNacelle,
        }
    }

    /* Final Turbine Assembly Recipes */

    recipe Recipe_Construct_Small_Wooden_Turbine
    {
        // Keep time or adjust for construction
        // Construction category
        // Add to construction menu
        // Required skill level to see in menu
        // Lua callback
        Result:WindEnergy.SmallWoodenTurbine, // Changed to ITEM name
        Time:200.0,
        Category:Utilities,
        BuildMenu:Construction,
        CanBuild:1,
        OnCreate:WindEnergy_OnPlaceTurbine,
        SkillRequired:Carpentry=3,
        SkillRequired:Mechanics=2,
        WindEnergy.WoodenTurbineBase=1,
        WindEnergy.WoodenTurbineNacelle=1,
        WindEnergy.WoodenTurbineBlades=3,
        Require:Base.Hammer,
        Require:Base.Screwdriver,
    }

    recipe Recipe_Construct_Large_Metal_Turbine
    {
        // Keep time or adjust for construction
        // Construction category
        // Add to construction menu
        // Required skill level to see in menu
        // Lua callback
        // Using Big Wooden for now, could change later
        Result:WindEnergy.LargeMetalTurbine, // Changed to ITEM name
        Time:300.0,
        Category:Utilities,
        BuildMenu:Construction,
        CanBuild:1,
        OnCreate:WindEnergy_OnPlaceTurbine,
        SkillRequired:MetalWelding=5,
        SkillRequired:Mechanics=3,
        WindEnergy.MetalTurbineBase=1,
        WindEnergy.MetalTurbineNacelle=1,
        WindEnergy.BigWoodenTurbineBlades=3,
        Require:Base.Wrench,
        Require:Base.Screwdriver,
        Require:Base.BlowTorch,
        Require:Base.WeldingMask,
    }
}